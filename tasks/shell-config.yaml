---
# â”€â”€ Shell Configuration (run as target user) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
- name: Check if fzf keybindings file exists
  stat:
    path: /usr/share/doc/fzf/examples/key-bindings.bash
  register: fzf_keybindings

- name: Enable fzf keybindings
  lineinfile:
    path: "{{ target_home }}/.bashrc"
    line: "source /usr/share/doc/fzf/examples/key-bindings.bash"
    create: yes
  become: false
  when: fzf_keybindings.stat.exists

- name: Add useful bash aliases
  blockinfile:
    path: "{{ target_home }}/.bashrc"
    marker: "# {mark} ANSIBLE MANAGED ALIASES"
    block: |
      alias ll='ls -alF'
      alias g='git'
      alias t='terraform'
      alias k='kubectl'
      alias sysupdate='echo "ğŸ”„ Running: sudo apt update" && sudo apt update && \
      echo "â¬†ï¸ Running: sudo apt full-upgrade -y" && sudo apt full-upgrade -y && \
      echo "ğŸ§¹ Running: sudo apt autoremove -y" && sudo apt autoremove -y && \
      echo "ğŸ§¼ Running: sudo apt autoclean" && sudo apt autoclean && \
      echo "âœ… System update complete."'
  become: false
